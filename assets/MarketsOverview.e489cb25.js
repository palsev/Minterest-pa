import{r as C,j as n,z as ot,t as E,D as st,n as M,d as x,T,s as nt,u as g,N as Y,k as R,R as G,q as I,f as lt,h as H,E as it,o as P,p as k}from"./uikit.725b2561.js";import{a as D,B as ct,j as pt,k as dt,U as B,D as L,V as ut,W as mt,X as ht,h as $,Y as yt,Z as F,d as _,b as j,f as Q,L as z,_ as q,$ as J,J as gt,M as bt,a0 as wt,O as Ct,N as Bt,P as kt}from"./index.f15c16df.js";import{c as ft,J as xt,A as S}from"./vendor.0b434375.js";import{u as N}from"./i18n.17e55e28.js";import"./appsignal.b6cb9d35.js";const Mt=e=>C.exports.createElement("svg",{width:13,height:13,viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg",...e},C.exports.createElement("path",{d:"M6.52246 2L2.77246 5.75L3.30121 6.27875L6.14746 3.43625V11H6.89746V3.43625L9.74371 6.27875L10.2725 5.75L6.52246 2Z"}));var V=(e=>(e.Lend="Supply",e.Borrow="Borrow",e))(V||{});const Dt=({item:e,isLoading:a,hideUnderlying:t})=>{const{t:r}=N(),o=D(ct);return n(ot,{Icon:e.row.assetIcon,SubIcon:o==null?void 0:o.smallLogo,balance:e.row.underlyingBalance,tooltipText:`${r("markets.currentBalance.left")} ${e.row.assetName} ${r("markets.currentBalance.right")}`,title:e.row.assetName,isLoading:a,hideUnderlying:t})},St=({item:e,isLoading:a,isSupplyType:t})=>{const{t:r}=N(),o=pt(),s={children:r(t?"markets.supply":"markets.borrow"),disabled:e.row.buttonDisabled||a},l=C.exports.useCallback(p=>{p.stopPropagation(),o(dt({type:t?"supply":"borrow",symbol:e.row.symbol}))},[t]);return n(E,{title:r("tooltips.nftHoldersCanUse"),withoutIcon:!0,disableTouchListener:!e.row.operationDisabledTooltipAvailable,disableFocusListener:!e.row.operationDisabledTooltipAvailable,disableHoverListener:!e.row.operationDisabledTooltipAvailable,children:n(st,{size:"small",onClick:l,...s,vr:t?"primary":"secondary"})})},Nt=({delta:e})=>{const a=M(Math.abs(e),{sign:"",compact:!0});return x("div",{className:B.deltaWrapper,children:[n(Mt,{style:{transform:e<0?"rotate(180deg)":"rotate(0deg)",fill:e<0?"#E46179":"#5DB14F"}}),n(T,{text:`${e<0?"-":""}${a}`,variant:"copySBold",className:ft(B.text,{[B.isNegative]:e<0})})]})},At=({item:e,isLoading:a,isSupplyType:t})=>{const{t:r}=N(),o=D(L),{data:s,isLoading:l}=ut(o,{skip:!o}),{data:p,isLoading:m}=mt(o,{skip:!o}),c=C.exports.useMemo(()=>{if(p!=null&&p.isActive)return r(t?"boostTooltips.supply.lp":"boostTooltips.borrow.lp");if(s)return r(t?"boostTooltips.supply.nft":"boostTooltips.borrow.nft")},[s,l,p,m,t,r]),{rateDisplay:b,marketMNTDisplay:i,nftBdrDisplay:h}=e.row,y={percentageValue:b,netApyOnly:!1,loading:a,rewardsArray:[{tooltipText:r(t?"markets.mntSupplyAPY":"markets.mntBorrowAPY"),rewardValue:i,Icon:ht},$.FEATURE.TABLE_NFT_BOOST?{tooltipText:c,rewardValue:h,Icon:yt}:{}]};return n(nt,{...y})},vt=({item:e,isLoading:a})=>{const t=g("32px","35px","41px"),{balanceDisplay:r,marketUnderlyingDisplay:o}=e.row;return n(Y,{value:r,subValue:o,isLoading:a,containerStyle:{height:t}})},Wt=({item:e,isLoading:a})=>{const t=g("32px","35px","41px"),{userBalanceDisplay:r,userBalanceUnderlying:o}=e.row;return n(Y,{value:r,subValue:o,isLoading:a,containerStyle:{height:t}})},Ut=()=>{const e=D(L),a=g(e?"25% !important":"calc(100% / 3) !important",e?"20% !important":"25% !important",e?"20% !important":"25% !important"),t=g(e?"25% !important":"calc(100% / 3) !important",e?"20% !important":"25% !important",e?"20% !important":"25% !important"),r=g(e?"25% !important":"calc(100% / 3) !important",e?"20% !important":"25% !important",e?"20% !important":"25% !important"),o=g("25% !important","20% !important","20% !important"),s=g(e?"25% !important":"calc(100% / 3) !important",e?"20% !important":"25% !important",e?"20% !important":"25% !important"),l=g("0 16px","0 24px","0 32px");return{border:"none",".MuiDataGrid-row":{padding:l},".MuiDataGrid-row:hover":{cursor:"pointer",".asset-tooltip-container":{"max-height":"16px",opacity:1}},"& .MuiDataGrid-virtualScrollerContent":{width:"100% !important",">div":{width:"100%"},"& .MuiDataGrid-row":{width:"100%"}},"& .MuiDataGrid-columnHeadersInner":{width:"100%",">div":{width:"100%"}},"& .MuiDataGrid-columnHeaders":{margin:l},"& .MuiDataGrid-columnHeader":{paddingRight:0,paddingLeft:0},"& .MuiDataGrid-cell":{paddingRight:0,paddingLeft:0},"& .assetCell":{width:a,maxWidth:a,minWidth:a},"& .assetHeaderCell":{width:a,maxWidth:a,minWidth:a},"& .totalSupplyCell":{width:t,maxWidth:t,minWidth:t},"& .totalSupplyHeaderCell":{width:t,maxWidth:t,minWidth:t},"& .rateColumn":{width:r,maxWidth:r,minWidth:r},"& .rateHeaderCell":{width:r,maxWidth:r,minWidth:r},"& .yourSupplyCell":{width:o,maxWidth:o,minWidth:o},"& .yourSupplyHeaderCell":{width:o,maxWidth:o,minWidth:o},"& .buttonColumn":{width:s,maxWidth:s,minWidth:s},"& .buttonHeaderCell":{width:s,maxWidth:s,minWidth:s}}},Tt=["desc","asc"],U={hideSortIcons:!0,filterable:!1,disableColumnMenu:!0,sortingOrder:Tt},Z=({type:e,list:a,isLoading:t=!1,total:r,delta:o})=>{const{t:s}=N(),l=e===V.Lend,{isMobile:p}=R(),m=D(L),c=xt(),b=a.some(u=>Number(u.nftBdrDisplay)>0),[i,h]=G.useState({field:"balanceValue",sort:"desc"}),y=u=>{u.sorting.sortModel[0]&&h(u.sorting.sortModel[0])},w=C.exports.useCallback((u={})=>({...U,field:"assetName",headerName:s("markets.asset"),headerClassName:"assetHeaderCell",cellClassName:"assetCell",renderCell:d=>n(Dt,{isLoading:t,item:d,hideUnderlying:!m||!l}),renderHeader:d=>{const f={label:d.colDef.headerName||"",sorted:i.field===d.field,sortOrder:i.sort};return n(I,{...f})},...u}),[t,m,i]),A=C.exports.useCallback((u={})=>({...U,field:"balanceValue",headerName:s(p?l?"markets.totalSupplyMobile":"markets.totalBorrowMobile":l?"markets.totalSupply":"markets.totalBorrow"),align:"right",headerAlign:"right",headerClassName:"totalSupplyHeaderCell",cellClassName:"totalSupplyCell",sortComparator:F,renderHeader:d=>{const f={label:d.colDef.headerName||"",sorted:i.field===d.field,sortOrder:i.sort};return n(I,{...f})},renderCell:d=>n(vt,{item:d,isLoading:t}),...u}),[t,l,i,p]),v=C.exports.useCallback((u={})=>({...U,field:"rateValue",headerName:s(l?"markets.supplyApy":"markets.borrowApr"),align:"right",headerAlign:"right",sortComparator:F,headerClassName:"rateHeaderCell",cellClassName:"rateColumn",renderHeader:d=>{const f={label:d.colDef.headerName||"",sorted:i.field===d.field,sortOrder:i.sort};return n(I,{...f})},renderCell:d=>n(At,{item:d,isLoading:t,isSupplyType:l}),...u}),[t,l,i]),W=C.exports.useCallback((u={})=>({...U,field:"userBalanceValue",headerName:s(l?"markets.yourSupply":"markets.yourBorrow"),align:"right",headerAlign:"right",headerClassName:"yourSupplyHeaderCell",cellClassName:"yourSupplyCell",sortComparator:F,renderHeader:d=>{const f={label:d.colDef.headerName||"",sorted:i.field===d.field,sortOrder:i.sort};return n(I,{...f})},renderCell:d=>n(Wt,{item:d,isLoading:t}),...u}),[t,l,i]),O=C.exports.useCallback((u={})=>({...U,field:"supplyButtons",headerName:"",sortable:!1,headerClassName:"buttonHeaderCell",cellClassName:"buttonColumn",align:"right",renderCell:d=>n(St,{item:d,isLoading:t,isSupplyType:l,type:e}),...u}),[t,l]),X=Ut(),K=g(0,8,16),tt=g(16,24,32),et=[w(),A(),v(),W(),O()],at=({field:u})=>u==="asset"?"assetColumn":u==="supplyButtons"?"buttonColumn":"customizedCell",rt=C.exports.useMemo(()=>s(p?"common.total":l?"markets.totalSupply":"markets.totalBorrow"),[p,s,l]);return x(lt,{sx:{flex:1,padding:"0px !important",paddingBottom:`${K}px !important`,paddingTop:`${tt}px !important`},children:[x(H,{className:B.headerRow,children:[n(T,{text:s(l?"markets.supply":"markets.borrow"),variant:"cardHeader"}),x("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[m&&x(H,{className:B.totalRow,children:[n(T,{className:B.title,variant:"copyMBold",text:`${rt}:`}),n(T,{className:B.usd,variant:"copyM",text:"$"}),n(T,{className:B.total,text:r,variant:"copyLBold"})]}),!!o&&n(E,{title:s(l?"markets.supplyDelta":"markets.borrowDelta"),children:n(Nt,{delta:o})})]})]}),n(it,{initialState:{sorting:{sortModel:[{field:"balanceValue",sort:"desc"}]}},columnVisibilityModel:{userBalanceValue:!!m,supplyButtons:!p,assetName:!0,balanceValue:!0,rateValue:!0},rows:t?[{id:0},{id:1},{id:2},{id:3}]:a,columns:et,onStateChange:y,sx:X,getCellClassName:at,headerHeight:24,rowHeight:p?68:b?101:73,onRowClick:u=>c.push(`/market/${u.row.symbol}`)})]})},Ht=(e,a,t,r,o)=>{var b,i,h,y;const s=(b=a.economic.apr)!=null?b:"0",l=(i=a.economic.marketBorrowUSD)!=null?i:"0",p=(h=a.economic.marketBorrowUnderlying)!=null?h:"0",m=(y=a.economic.marketMntBorrowAPY)!=null?y:"0",c={id:`borrow_table_row_${a.meta.symbol}`,symbol:a.meta.symbol,assetName:q(a.meta.symbol,e),assetIcon:J(a.meta.symbol),marketUnderlyingDisplay:P(p,{compact:!0}),marketMNTDisplay:k(m,{sign:""}),rateValue:S(s).toBigInt(),rateDisplay:k(s,{sign:""}),balanceValue:S(l).toBigInt(),balanceDisplay:M(l,{compact:!0,sign:""}),buttonDisabled:r||!$.FEATURE.BORROW.includes(a.meta.symbol),operationDisabledTooltipAvailable:o&&!(o!=null&&o.isWhitelisted)};if(t){const{userBorrowUSD:w,userBorrowUnderlying:A,mntBorrowAPY:v,nftBdrBorrowBoost:W}=t;c.userBalanceValue=S(w).toBigInt(),c.userBalanceDisplay=M(w,{compact:!0,sign:""}),c.userBalanceUnderlying=P(A,{compact:!0}),c.marketMNTDisplay=k(v,{sign:""}),c.nftBdrDisplay=k(W,{sign:""})}return c},Pt=()=>{const{t:e}=N(),a=D(L),{data:t,isFetching:r}=_(),{data:o,isFetching:s}=j({accountAddress:a},{skip:!a}),{isLoading:l,isMarketOperationPaused:p}=Q(),{isMobile:m}=R(),c=G.useMemo(()=>t?z(t).map(i=>{const h=o==null?void 0:o.userMarkets.find(({symbol:w})=>w===i.meta.symbol),y=p(i.meta,"borrow");return Ht(e,i,h,!(o!=null&&o.isWhitelisted)||y,o)}):[],[t,o]);return n(Z,{type:V.Borrow,isLoading:r||s||l,list:c,userData:o,total:M(t==null?void 0:t.totalBorrowUSD,{sign:"",compact:m}),delta:+(t==null?void 0:t.totalBorrowWeekDeltaUSD)})},Lt=(e,a,t,r,o)=>{var b,i,h,y;const s=(b=a.economic.apy)!=null?b:"0",l=(i=a.economic.marketSupplyUSD)!=null?i:"0",p=(h=a.economic.marketSupplyUnderlying)!=null?h:"0",m=(y=a.economic.marketMntSupplyAPY)!=null?y:"0",c={id:`supply_table_row_${a.meta.symbol}`,symbol:a.meta.symbol,assetName:q(a.meta.symbol,e),assetIcon:J(a.meta.symbol),marketUnderlyingDisplay:P(p,{compact:!0}),marketMNTDisplay:k(m,{sign:""}),rateValue:S(s).toBigInt(),rateDisplay:k(s,{sign:""}),balanceValue:S(l).toBigInt(),balanceDisplay:M(l,{compact:!0,sign:""}),buttonDisabled:r||!$.FEATURE.LEND.includes(a.meta.symbol),operationDisabledTooltipAvailable:o&&!(o!=null&&o.isWhitelisted)};if(t){const{userSupplyUSD:w,userSupplyUnderlying:A,underlyingBalance:v,mntSupplyAPY:W,nftBdrSupplyBoost:O}=t;c.userBalanceValue=S(w).toBigInt(),c.userBalanceDisplay=M(w,{compact:!0,sign:""}),c.userBalanceUnderlying=P(A,{compact:!0}),c.underlyingBalance=P(v,{compact:!0}),c.marketMNTDisplay=k(W,{sign:""}),c.nftBdrDisplay=k(O,{sign:""})}return c},It=()=>{const{t:e}=N(),{isMobile:a}=R(),t=D(L),{data:r,isFetching:o}=_(),{data:s,isFetching:l}=j({accountAddress:t},{skip:!t}),{isLoading:p,isMarketOperationPaused:m}=Q(),c=G.useMemo(()=>r?z(r).map(i=>{const h=s==null?void 0:s.userMarkets.find(({symbol:w})=>w===i.meta.symbol),y=m(i.meta,"supply");return Lt(e,i,h,!(s!=null&&s.isWhitelisted)||y,s)}):[],[r,s]);return n(Z,{type:V.Lend,isLoading:l||o||p,list:c,userData:s,total:M(r==null?void 0:r.totalSupplyUSD,{sign:"",compact:a}),delta:+(r==null?void 0:r.totalSupplyWeekDeltaUSD)})},$t=()=>{const e=g("wrap","wrap","nowrap"),a=g("24px","32px","24px"),t=g("40px 16px","40px","40px 120px"),r=D(gt),o=C.exports.useMemo(()=>r==null?void 0:r.opened,[r]);return x(bt,{className:wt.container,style:{padding:t},children:[n(Ct,{title:"Overview | Minterest",description:"Minterest is a decentralised lending and borrowing protocol that captures 100% of the value created from its functions.",canonical:"https://minterest.com/"}),n(Bt,{isOpen:o}),n(kt,{style:{alignItems:"unset"},children:x(H,{sx:{flex:1,gap:a,flexWrap:e},children:[n(H,{sx:{width:"100%"},children:n(It,{})}),n(H,{sx:{width:"100%"},children:n(Pt,{})})]})})]})};export{$t as default};
//# sourceMappingURL=MarketsOverview.e489cb25.js.map
