import{R as A,j as N,g as R}from"./uikit.725b2561.js";var D=globalThis&&globalThis.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),g=globalThis&&globalThis.__assign||function(){return g=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},g.apply(this,arguments)},et=function(r){D(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.state={error:void 0},e}return t.getDerivedStateFromError=function(e){return{error:e}},t.prototype.componentDidCatch=function(e){var i=this.props,o=i.instance,n=i.action,s=i.tags,u=s===void 0?{}:s,c=o.createSpan();c.setError(e).setTags(g({framework:"React"},u)),n&&n!==""&&c.setAction(n),o.send(c),this.state.error||this.setState({error:e})},t.prototype.render=function(){return this.state.error?this.props.fallback?this.props.fallback(this.state.error):null:this.props.children},t.defaultProps={action:""},t}(A.Component),L=globalThis&&globalThis.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),w=globalThis&&globalThis.__assign||function(){return w=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},w.apply(this,arguments)};(function(r){L(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.state={error:void 0},e}return t.prototype.unstable_handleError=function(e){var i=this.props,o=i.instance,n=i.action,s=i.tags,u=s===void 0?{}:s,c=e.name,a=e.message,f=e.stack,l=o.createSpan();l.setError({name:c,message:a,stack:f}).setTags(w({framework:"Legacy React"},u)),n&&n!==""&&l.setAction(n),o.send(l),this.setState({error:e})},t.prototype.render=function(){return N("div",{children:this.state.error?this.props.fallback?this.props.fallback(this.state.error):null:this.props.children})},t.defaultProps={action:""},t})(A.Component);const k={},rt=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));var b=function(r,t){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])},b(r,t)};function j(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");b(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var p=function(){return p=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++){e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},p.apply(this,arguments)};function m(r,t,e,i){function o(n){return n instanceof e?n:new e(function(s){s(n)})}return new(e||(e=Promise))(function(n,s){function u(f){try{a(i.next(f))}catch(l){s(l)}}function c(f){try{a(i.throw(f))}catch(l){s(l)}}function a(f){f.done?n(f.value):o(f.value).then(u,c)}a((i=i.apply(r,t||[])).next())})}function y(r,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,o,n,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,o&&(n=a[0]&2?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){e.label=a[1];break}if(a[0]===6&&e.label<n[1]){e.label=n[1],n=a;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(a);break}n[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(f){a=[6,f],o=0}finally{i=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function C(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function q(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),o,n=[],s;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)n.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return n}function S(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(q(arguments[t]));return r}function I(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),o,n=[],s;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)n.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return n}function H(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(I(arguments[t]));return r}function T(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return r.length===0?function(e){return e}:r.length===1?r[0]:r.reduce(function(e,i){return function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];return e(i.apply(void 0,H(o)))}})}function M(r){if(!!r)return Object.keys(r).forEach(function(t){typeof r[t]=="object"&&(r[t]=JSON.stringify(r[t])),r[t]=String(r[t])}),r}function E(r){if(!!r)return Object.keys(r).forEach(function(t){typeof r[t]=="string"||typeof r[t]=="boolean"||typeof r[t]=="number"||(r[t]=JSON.stringify(r[t]))}),r}function X(r){return typeof r.message<"u"&&(typeof r.stacktrace<"u"||typeof r["opera#sourceloc"]<"u"||typeof r.stack<"u")}function G(r){if(typeof r.stacktrace<"u"||typeof r["opera#sourceloc"]<"u"){var t=r.stacktrace,e=t===void 0?"":t;return e.split(`
`).filter(function(n){return n!==""})}else if(r.stack){var i=r.stack,o=i===void 0?"":i;return o.split(`
`).filter(function(n){return n!==""})}else return["No stacktrace available"]}function B(r){return Object.keys(r).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(r[t])}).join("&")}function x(){return Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function _(){return x()?global:typeof window<"u"?window:typeof self<"u"?self:{}}function z(r,t){return t=t||{},new Promise(function(e,i){var o=new XMLHttpRequest,n=[],s=[],u={},c=function(){return{ok:(o.status/100|0)==2,statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:c,headers:{keys:function(){return n},entries:function(){return s},get:function(f){return u[f.toLowerCase()]},has:function(f){return f.toLowerCase()in u}}}};for(var a in o.open(t.method||"get",r,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(f,l,d){n.push(l=l.toLowerCase()),s.push([l,d]),u[l]=u[l]?u[l]+","+d:d}),e(c())},o.onerror=i,o.withCredentials=t.credentials=="include",t.headers)o.setRequestHeader(a,t.headers[a]);o.send(t.body||null)})}const $=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"})),O=R($);self.fetch||(self.fetch=O.default||O);var F=function(){function r(t){this._data=t}return r.prototype.toJSON=function(){return JSON.stringify(this._data)},r.prototype.serialize=function(){return this._data},r}(),J="1.3.22",P=function(){function r(){}return r.serialize=function(){return{transport:this.transport(),origin:this.origin()}},r.origin=function(){var t=_();return!t.navigator||t.navigator.product==="ReactNative"&&!t.location?"":t.location.origin||t.location.protocol+"//"+t.location.hostname},r.transport=function(){var t=_();return x()&&typeof jest>"u"?"NodeHTTP":t.XDomainRequest?"XDomainRequest":t.XMLHttpRequest&&!t.fetch?"XMLHttpRequest":"fetch"},r.supportsPromises=function(){var t=_();return"Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var e;return new t.Promise(function(i){e=i}),typeof e=="function"}()},r}(),U=function(){function r(t){this.url=t}return r.prototype.send=function(t){var e=this;return new Promise(function(i,o){var n,s=new XDomainRequest,u=new RegExp("^https?:");s.onload=function(){return i({})},s.open("POST",e.url.replace(u,(n=window==null?void 0:window.location)===null||n===void 0?void 0:n.protocol)),setTimeout(function(){try{s.send(t)}catch(c){o(c)}},0)})},r}(),V=function(){function r(t){this.url=t}return r.prototype.send=function(t){var e=this;return new Promise(function(i,o){try{var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i({})},n.open("POST",e.url),n.send(t)}catch(s){o(s)}})},r}(),K=function(){function r(t,e){this.url=t}return r.prototype.send=function(t){return m(this,void 0,void 0,function(){var e,i,o;return y(this,function(n){switch(n.label){case 0:return[4,fetch(this.url,{method:"POST",body:t})];case 1:return e=n.sent(),i=e.statusText,o=e.ok,[2,o?Promise.resolve({}):Promise.reject({statusText:i})]}})})},r}(),Q=function(){function r(t){this.url=t}return r.prototype.send=function(t){var e=this,i={method:"POST",headers:{"Content-Type":"application/json","Content-Length":t.length}};return new Promise(function(o,n){var s=k.request(e.url,i,function(){}).on("error",function(u){return n(u)});s.write(t),s.end(),o({})})},r}(),W=function(){function r(t){this._uri=t.uri||"https://appsignal-endpoint.net/collect",this._apiKey=t.key,this._clientVersion=t.version,this._transport=this._createTransport(this._url())}return r.prototype.push=function(t){return m(this,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,this._transport.send(t.toJSON())];case 1:return e.sent(),[2,t]}})})},r.prototype._createTransport=function(t){switch(P.transport()){case"XDomainRequest":return new U(t);case"XMLHttpRequest":return new V(t);case"NodeHTTP":return new Q(t);default:return new K(t)}},r.prototype._url=function(){var t=this._authorization();return this._uri+"?"+B(t)},r.prototype._authorization=function(){return{api_key:this._apiKey,version:this._clientVersion}},r}(),v=function(r){j(t,r);function t(e){return r.call(this,p({timestamp:Math.round(new Date().getTime()/1e3),namespace:"frontend",error:{name:"NullError",message:"No error has been set",backtrace:[]}},e))||this}return t.prototype.setAction=function(e){return!e||typeof e!="string"?this:(this._data.action=e,this)},t.prototype.setNamespace=function(e){return!e||typeof e!="string"?this:(this._data.namespace=e,this)},t.prototype.setError=function(e){return!e||!X(e)?this:(this._data.error={name:e.name||"[unknown]",message:e.message,backtrace:G(e)},this)},t.prototype.setTags=function(e){return this._data.tags=p(p({},this._data.tags),M(e)),this},t.prototype.setParams=function(e){return this._data.params=p(p({},this._data.params),e),this},t.prototype.setBreadcrumbs=function(e){return this._data.breadcrumbs=e,this},t}(F),Y=function(){function r(t){this._data=t||[]}return r.prototype.clear=function(){this._data=[]},r.prototype.values=function(){return this._data},r.prototype.push=function(t){var e;return Array.isArray(t)?(e=this._data).push.apply(e,S(t)):this._data.push(t)},r.prototype.drain=function(){return y(this,function(t){switch(t.label){case 0:return this._data.length>0?[4,this._data.shift()]:[3,2];case 1:return t.sent(),[3,0];case 2:return[2]}})},r}(),Z=function(){function r(t,e,i){this._retries=0,this._timerID=0,this._duration=0,this._api=e,this._queue=t,this.options=p({limit:5,initialDuration:1e3},i),this.reset()}return r.prototype.schedule=function(t){var e=this;t===void 0&&(t=this._duration);var i=_(),o=1.3,n=function(){return m(e,void 0,void 0,function(){var s,u,c,a,f,l,d;return y(this,function(h){switch(h.label){case 0:h.trys.push([0,7,8,9]),s=C(this._queue.drain()),u=s.next(),h.label=1;case 1:if(u.done)return[3,6];if(c=u.value,!c)return[2];h.label=2;case 2:return h.trys.push([2,4,,5]),[4,this._api.push(c)];case 3:return h.sent(),[3,5];case 4:return h.sent(),a=Math.floor(Math.pow(t,o)),this._retries=this._retries-1,this._retries===0?this.reset():(this._queue.push(c),this._timerID=this.schedule(a)),[2];case 5:return u=s.next(),[3,1];case 6:return[3,9];case 7:return f=h.sent(),l={error:f},[3,9];case 8:try{u&&!u.done&&(d=s.return)&&d.call(s)}finally{if(l)throw l.error}return[7];case 9:return this.reset(),[2]}})})};return i.setTimeout(n,t)},r.prototype.reset=function(){var t=this.options,e=t.limit,i=t.initialDuration;this._retries=e,this._duration=i},r}(),nt=function(){function r(t){this.VERSION=J,this.ignored=[],this._breadcrumbs=[],this._hooks={decorators:Array(),overrides:Array()},this._env=P.serialize(),this._queue=new Y([]);var e=t.key,i=e===void 0?"":e,o=t.uri,n=t.revision,s=t.ignoreErrors;n&&typeof n!="string"&&(t.revision=String(n)),i===""&&console.info("[APPSIGNAL]: Started in development mode."),this._api=new W({key:i,uri:o,version:this.VERSION}),s&&Array.isArray(s)&&(this.ignored=s),this._dispatcher=new Z(this._queue,this._api),this._options=t}return r.prototype.send=function(t,e,i){var o=this;if(!(t instanceof Error)&&!(t instanceof v)){console.error("[APPSIGNAL]: Can't send error, given error is not a valid type");return}if(this.ignored.length!==0){if(t instanceof Error&&this.ignored.some(function(a){return a.test(t.message)})){console.warn("[APPSIGNAL]: Ignored an error: "+t.message);return}if(t instanceof v){var n=t.serialize().error;if(n.message&&this.ignored.some(function(a){return a.test(n.message)})){console.warn("[APPSIGNAL]: Ignored a span: "+n.message);return}}}var s=t instanceof v?t:this._createSpanFromError(t);if(this._hooks.decorators.length>0&&T.apply(void 0,S(this._hooks.decorators))(s),e)if(typeof e=="function"){var u=e;u(s)}else{console.warn("[APPSIGNAL]: DEPRECATED: Calling the `send`/`sendError` function with a tags object is deprecated. Use the callback argument instead.");var c=E(e)||{};s.setTags(c)}if(i&&(console.warn("[APPSIGNAL]: DEPRECATED: Calling the `send`/`sendError` function with a namespace is deprecated. Use the callback argument instead."),s.setNamespace(i)),this._breadcrumbs.length>0&&s.setBreadcrumbs(this._breadcrumbs),this._hooks.overrides.length>0&&T.apply(void 0,S(this._hooks.overrides))(s),P.supportsPromises()){if(this._breadcrumbs=[],this._options.key)return this._api.push(s).catch(function(){o._queue.push(s),setTimeout(function(){return o._dispatcher.schedule()},0)});if(console.warn("[APPSIGNAL]: Span not sent because we're in development mode:",s),t instanceof Error)throw t}else{console.error("[APPSIGNAL]: Error not sent. A Promise polyfill is required.");return}},r.prototype.sendError=function(t,e,i){return this.send(t,e,i)},r.prototype.use=function(t){t.call(this)},r.prototype.createSpan=function(t){var e=this._options,i=e.revision,o=i===void 0?"":i,n=e.namespace,s=new v({environment:this._env,revision:o});return n&&s.setNamespace(n),t&&typeof t=="function"&&t(s),s},r.prototype.wrap=function(t,e,i){return m(this,void 0,void 0,function(){var o;return y(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,4]),[4,t()];case 1:return[2,n.sent()];case 2:return o=n.sent(),[4,this.sendError(o,e,i)];case 3:return n.sent(),[2,Promise.reject(o)];case 4:return[2]}})})},r.prototype.addDecorator=function(t){this._hooks.decorators.push(t)},r.prototype.addOverride=function(t){this._hooks.overrides.push(t)},r.prototype.demo=function(){var t=this._createSpanFromError(new Error("Hello world! This is an error used for demonstration purposes."));t.setAction("TestAction").setParams({path:"/hello",method:"GET"}).setTags({demo_sample:"true"}),this.send(t)},r.prototype.addBreadcrumb=function(t){var e=p(p({timestamp:Math.round(new Date().getTime()/1e3)},t),{metadata:E(t.metadata)});if(!e.category){console.warn("[APPSIGNAL]: Breadcrumb not added. `category` is missing.");return}if(!e.action){console.warn("[APPSIGNAL]: Breadcrumb not added. `action` is missing.");return}this._breadcrumbs.length===20&&this._breadcrumbs.pop(),this._breadcrumbs.unshift(e)},r.prototype._createSpanFromError=function(t){var e=this.createSpan();return e.setError(t),e},r}();export{nt as A,et as E,rt as _};
//# sourceMappingURL=appsignal.b6cb9d35.js.map
